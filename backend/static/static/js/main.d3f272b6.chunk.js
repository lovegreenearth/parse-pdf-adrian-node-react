(this.webpackJsonpmcash=this.webpackJsonpmcash||[]).push([[0],{18:function(e,t,n){"use strict";var a=n(0);t.a=Object(a.createContext)(null)},22:function(e,t,n){"use strict";t.a={BACKEND_URL:"http://81.181.160.210"}},49:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Layout1",(function(){return S})),n.d(a,"Layout2",(function(){return T})),n.d(a,"Layout3",(function(){return D}));var c=n(1),r=n(0),s=n.n(r),o=n(39),i=n.n(o),u=(n(49),n(25)),l=n.n(u),j=n(29),d=n(13),b=n(21),h=n.n(b),O=n(79),x=n(9),f=n(3),v=n(15),m=n(40),p=n.n(m),g={display:"block",margin:"0 auto",borderColor:"#3f7fe9"},y=function(){return Object(c.jsx)("div",{className:"loading-component",children:Object(c.jsx)(p.a,{color:"yellow",loading:!0,cssOverride:g,size:150})})},k=[{path:"/",key:"ROOT",layout:"Layout2",exact:!0,component:Object(v.a)((function(){return n.e(3).then(n.bind(null,87))}),{fallback:Object(c.jsx)(y,{})})},{path:"/signup",key:"ROOT",layout:"Layout1",exact:!0,component:Object(v.a)((function(){return n.e(6).then(n.bind(null,88))}),{fallback:Object(c.jsx)(y,{})})},{path:"/signin",key:"ROOT",layout:"Layout1",exact:!0,component:Object(v.a)((function(){return n.e(5).then(n.bind(null,89))}),{fallback:Object(c.jsx)(y,{})})},{path:"/read/:id",key:"ROOT",layout:"Layout3",exact:!0,component:Object(v.a)((function(){return n.e(4).then(n.bind(null,90))}),{fallback:Object(c.jsx)(y,{})})}],N=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("div",{className:"top-header",children:[Object(c.jsx)("div",{className:"header-logo",children:"MayaTravel"}),Object(c.jsx)("div",{className:"user-mode",children:Object(c.jsxs)("div",{className:"auth-link",children:[Object(c.jsx)(x.b,{to:"/signin",children:"SignIn"}),"/",Object(c.jsx)(x.b,{to:"/signup",children:"SignUp"})]})})]})})},L=function(){return Object(c.jsx)("div",{className:"footer",children:"Copyright @ 2023 developed by MayaTravel"})},S=function(e){var t=e.children;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(N,{}),Object(c.jsx)("div",{className:"auth-page",children:t}),Object(c.jsx)(L,{})]})},C=n(18),I=function(){var e=Object(r.useContext)(C.a),t=(e.userData,e.setUserData),n=Object(f.f)(),a=Object(r.useState)(!1),s=Object(d.a)(a,2),o=(s[0],s[1]),i=Object(r.useState)(!1),u=Object(d.a)(i,2),l=(u[0],u[1]);return Object(r.useEffect)((function(){var e=localStorage.getItem("token");o(!!e);var t=localStorage.getItem("role");l("admin"==t)}),[]),Object(c.jsx)("header",{children:Object(c.jsxs)("div",{className:"top-header",children:[Object(c.jsx)("div",{className:"header-logo",children:Object(c.jsx)("h1",{children:"MayaTravel"})}),Object(c.jsxs)("div",{className:"user-mode",children:[Object(c.jsx)(x.b,{to:"/",className:"contact-us",children:"Home"}),Object(c.jsx)("div",{className:"auth-link",children:Object(c.jsx)("a",{onClick:function(){t({token:void 0,user:void 0}),localStorage.setItem("token",""),localStorage.setItem("role",""),n.push("/signin")},children:"Logout"})})]})]})})},T=function(e){var t=e.children;return Object(c.jsxs)(s.a.Fragment,{children:[I(),Object(c.jsx)("div",{className:"content",children:t}),Object(c.jsx)("div",{className:"footer",children:"Copyright @ 2023 developed by MayaTravel"})]})},D=function(e){var t=e.children;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("div",{className:"",children:t}),Object(c.jsx)(L,{})]})},E=n(20),F=n(41),R=n.n(F),U=function e(t,n){var a=null;return R.a.forEach(n,(function(n){if(n.routes)e(t,n.routes);else{var c=Object(f.e)(t,n);c&&c.isExact&&(a=n)}})),a},w=function(e){return Object(c.jsx)(f.a,{path:e.path,exact:e.exact,render:function(t){return Object(c.jsx)(e.component,Object(E.a)(Object(E.a)({},t),{},{routes:e.routes}))}})},B=function(e){var t=e.routes;return Object(c.jsx)(f.c,{children:t.map((function(e){return Object(c.jsx)(w,Object(E.a)({},e),e.key)}))})},M=function(){var e=Object(f.g)(),t=U(e.pathname,k),n=a[t.layout];return Object(c.jsx)(n,{children:Object(c.jsx)(B,{routes:k})})},A=n(22);var K=function(){var e=Object(r.useState)({token:void 0,user:void 0}),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,h.a.post(A.a.BACKEND_URL+"/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,h.a.get(A.a.BACKEND_URL+"/users/",{headers:{"x-auth-token":t}});case 8:n=e.sent,a({token:t,user:n.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)(O.a,{locale:"en",children:Object(c.jsx)(x.a,{children:Object(c.jsx)(C.a.Provider,{value:{userData:n,setUserData:a},children:Object(c.jsx)(M,{})})})})},P=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,91)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(76);i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(K,{})}),document.getElementById("root")),P()}},[[77,1,2]]]);
//# sourceMappingURL=main.d3f272b6.chunk.js.map