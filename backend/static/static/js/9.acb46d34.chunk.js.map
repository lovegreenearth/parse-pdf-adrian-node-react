{"version":3,"sources":["app/pages/Ticket/index.js"],"names":["Ticket","props","handleChange","value","setState","selected","state","tickets","map","t","activeTicket","content","copyLink","bind","localStorage","getItem","window","location","href","axios","post","contant","BACKEND_URL","then","response","tmp","data","push","_id","label","bookRef","catch","error","input","document","createElement","setAttribute","this","body","appendChild","select","execCommand","removeChild","alert","className","wrap","style","width","marginTop","onChange","options","ref","el","componentRef","maxWidth","fontSize","textAlign","margin","padding","dangerouslySetInnerHTML","__html","display","justifyContent","color","position","height","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","opacity","top","onClick","trigger","pageStyle","loading","Component"],"mappings":"mOAMMA,E,kDAEF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAiCVC,aAAe,SAACC,GACZ,EAAKC,SAAS,CACVC,SAAUF,IAEd,EAAKG,MAAMC,QAAQC,KAAI,SAAAC,GACfA,EAAEN,OAASA,GACX,EAAKC,SAAS,CACVM,aAAcD,EAAEE,cAvC5B,EAAKL,MAAQ,CACTC,QAAS,GACTG,aAAc,KACdL,SAAU,MAGd,EAAKO,SAAW,EAAKA,SAASC,KAAd,gBARD,E,gEAWE,IAAD,OACJC,aAAaC,QAAQ,WAE7BC,OAAOC,SAASC,KAAO,WAG3BC,IAAMC,KAAKC,IAAQC,YAAc,sBAAuB,IACnDC,MAAK,SAACC,GACH,IAAMC,EAAM,GACZD,EAASE,KAAKlB,KAAI,SAAAC,GACdgB,EAAIE,KAAK,CACLxB,MAAOM,EAAEmB,IACTC,MAAOpB,EAAEqB,QACTnB,QAASF,EAAEE,aAGnB,EAAKP,SAAS,CACVG,QAASkB,OAEdM,OAAM,SAACC,S,iCAmBd,IAAMC,EAAQC,SAASC,cAAc,SAErCF,EAAMG,aAAa,QAAS,8BAAgCC,KAAK/B,MAAMD,UACvE6B,SAASI,KAAKC,YAAYN,GAG1BA,EAAMO,SACNN,SAASO,YAAY,QAGrBP,SAASI,KAAKI,YAAYT,GAE1BU,MAAM,a,+BAGA,IAAD,OACL,OACI,qCACI,sBAAKC,UAAU,YAAf,UACI,cAAC,IAAD,CAAOC,MAAI,EAAX,SACI,cAAC,IAAD,CACIC,MAAO,CACHC,MAAO,IACPC,UAAW,QAEfC,SAAUZ,KAAKnC,aACfgD,QAASb,KAAK/B,MAAMC,YAIxB8B,KAAK/B,MAAMI,cAAgB,sBAAKkC,UAAU,gBAAgBO,IAAK,SAAAC,GAAE,OAAK,EAAKC,aAAeD,GAA/D,UACvB,qBAAKR,UAAU,WAAWE,MAAO,CAC7BQ,SAAU,QACVC,SAAU,OACVC,UAAW,OACXC,OAAQ,YACRC,QAAS,QACVC,wBAAyB,CAAEC,OAAQvB,KAAK/B,MAAMI,gBACjD,sBAAKoC,MAAO,CACRQ,SAAU,QACVG,OAAQ,YACRI,QAAS,OACTC,eAAgB,gBAChBN,UAAW,OACXO,MAAO,UACPR,SAAU,OACVG,QAAS,UARb,UAUI,gCACI,kDACA,0DACA,kDACA,0DAEJ,gCACI,oEACA,wEACA,kEAGR,qBAAKd,UAAU,WAAWE,MAAO,CAC7BkB,SAAU,WACVjB,MAAO,OACPkB,OAAQ,OACRC,gBAAiB,mBACjBC,eAAgB,UAChBC,mBAAoB,SACpBC,iBAAkB,YAClBC,QAAS,MACTC,IAAK,UAKblC,KAAK/B,MAAMI,cAAgB,wBAAQkC,UAAU,cAAc4B,QAAS,kBAAM,EAAK5D,YAApD,uBAK3ByB,KAAK/B,MAAMI,cAAgB,cAAC,IAAD,CACvB+D,QAAS,WACL,OAAO,mBAAG7B,UAAU,eAAe1B,KAAK,IAAjC,4BAEXwD,UAAU,8BACV/D,QAAS,kBAAM,EAAK0C,gBAG5B,qBAAKP,MAAO,CAAEE,UAAW,aAGzBX,KAAK/B,MAAMqE,SACP,qBAAK/B,UAAU,UAAf,SACI,qD,GA/IPgC,aAwJN5E","file":"static/js/9.acb46d34.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport contant from '../../utils/constant';\r\nimport { Select, Space } from 'antd';\r\nimport ReactToPrint from 'react-to-print';\r\n\r\nclass Ticket extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tickets: [],\r\n            activeTicket: null,\r\n            selected: null\r\n        }\r\n\r\n        this.copyLink = this.copyLink.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        let token = localStorage.getItem('token');\r\n        if (!token) {\r\n            window.location.href = '/signin';\r\n        }\r\n\r\n        axios.post(contant.BACKEND_URL + \"/processPDF/readAll\", {})\r\n            .then((response) => {\r\n                const tmp = [];\r\n                response.data.map(t => {\r\n                    tmp.push({\r\n                        value: t._id,\r\n                        label: t.bookRef,\r\n                        content: t.content\r\n                    });\r\n                })\r\n                this.setState({\r\n                    tickets: tmp\r\n                })\r\n            }).catch((error) => {\r\n            });\r\n    }\r\n\r\n    handleChange = (value) => {\r\n        this.setState({\r\n            selected: value\r\n        })    \r\n        this.state.tickets.map(t => {\r\n            if (t.value == value) {\r\n                this.setState({\r\n                    activeTicket: t.content\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    copyLink() {\r\n        // Create a temporary input element\r\n        const input = document.createElement('input');\r\n        // input.setAttribute('value', 'http://localhost:3000/read/' + this.state.selected);\r\n        input.setAttribute('value', 'http://81.181.160.210/read/' + this.state.selected);\r\n        document.body.appendChild(input);\r\n\r\n        // Select and copy the link\r\n        input.select();\r\n        document.execCommand('copy');\r\n\r\n        // Remove the temporary input element\r\n        document.body.removeChild(input);\r\n\r\n        alert(\"Copied!\")\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className='home-page'>\r\n                    <Space wrap>\r\n                        <Select\r\n                            style={{\r\n                                width: 200,\r\n                                marginTop: '50px'\r\n                            }}\r\n                            onChange={this.handleChange}\r\n                            options={this.state.tickets}\r\n                        />\r\n                    </Space>\r\n                    {\r\n                        this.state.activeTicket && <div className='pdf-container' ref={el => (this.componentRef = el)}>\r\n                            <div className='pdf-text' style={{\r\n                                maxWidth: '814px',\r\n                                fontSize: '18px',\r\n                                textAlign: 'left',\r\n                                margin: '40px auto',\r\n                                padding: '20px'\r\n                            }} dangerouslySetInnerHTML={{ __html: this.state.activeTicket }}></div>\r\n                            <div style={{\r\n                                maxWidth: '814px',\r\n                                margin: '20px auto',\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                textAlign: 'left',\r\n                                color: '#5f59b1',\r\n                                fontSize: '18px',\r\n                                padding: '0 20px'\r\n                            }}>\r\n                                <div>\r\n                                    <div>SC THUG-NET SRL</div>\r\n                                    <div>Reg. com: J40/5598/2005</div>\r\n                                    <div>CIF: RO17401198</div>\r\n                                    <div>office@mayatravel.ro</div>\r\n                                </div>\r\n                                <div>\r\n                                    <div>Licenta de turism: 201/27.11.2018</div>\r\n                                    <div>Polita de asigurare: 57285/21.11.2022</div>\r\n                                    <div>Capital social: 25000 RON</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className='pdf-back' style={{\r\n                                position: 'absolute',\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                backgroundImage: 'url(\"/logo.png\")',\r\n                                backgroundSize: 'contain',\r\n                                backgroundPosition: 'center',\r\n                                backgroundRepeat: 'no-repeat',\r\n                                opacity: '0.1',\r\n                                top: '0'\r\n                            }}></div>\r\n                        </div>\r\n                    }\r\n                    {\r\n                        this.state.activeTicket && <button className=\"copy-button\" onClick={() => this.copyLink()}>\r\n                            Copy Link\r\n                        </button>\r\n                    }\r\n                    {\r\n                        this.state.activeTicket && <ReactToPrint\r\n                            trigger={() => {\r\n                                return <a className=\"print-button\" href=\"#\">Print As PDF!</a>;\r\n                            }}\r\n                            pageStyle=\"@page { margin: 10px 5px; }\"\r\n                            content={() => this.componentRef}\r\n                        />\r\n                    }\r\n                    <div style={{ marginTop: '50px' }}></div>\r\n                </div>\r\n                {\r\n                    this.state.loading && (\r\n                        <div className='loading'>\r\n                            <h1>Loading...</h1>\r\n                        </div>\r\n                    )\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Ticket;"],"sourceRoot":""}